<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Stata-like analysis of unstratified matched-case control data — mcc • matchedcc</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Stata-like analysis of unstratified matched-case control data — mcc"><meta name="description" content="Using data from vectors, data from a 2x2 contingency table, or individual
cell counts, mcc() and mcci() will calculate McNemar's \(\chi^{2}\);
point estimates and confidence intervals for the difference, ratio, and
relative difference of proportion of pairs with the exposure; and the odds
ratio with a confidence interval."><meta property="og:description" content="Using data from vectors, data from a 2x2 contingency table, or individual
cell counts, mcc() and mcci() will calculate McNemar's \(\chi^{2}\);
point estimates and confidence intervals for the difference, ratio, and
relative difference of proportion of pairs with the exposure; and the odds
ratio with a confidence interval."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">matchedcc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/simpar1471/matchedcc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Stata-like analysis of unstratified matched-case control data</h1>
      <small class="dont-index">Source: <a href="https://github.com/simpar1471/matchedcc/blob/main/R/mcc.R" class="external-link"><code>R/mcc.R</code></a></small>
      <div class="d-none name"><code>mcc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Using data from vectors, data from a 2x2 contingency table, or individual
cell counts, <code>mcc()</code> and <code>mcci()</code> will calculate McNemar's \(\chi^{2}\);
point estimates and confidence intervals for the difference, ratio, and
relative difference of proportion of pairs with the exposure; and the odds
ratio with a confidence interval.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mcc</span><span class="op">(</span>cases <span class="op">=</span> <span class="cn">NULL</span>, controls <span class="op">=</span> <span class="cn">NULL</span>, table <span class="op">=</span> <span class="cn">NULL</span>, conf_level <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">mcci</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span>, <span class="va">c</span>, <span class="va">d</span>, conf_level <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cases-controls">cases, controls<a class="anchor" aria-label="anchor" href="#arg-cases-controls"></a></dt>
<dd><p>Numeric vectors of the same length, with values of <code>0</code>
(unexposed) and <code>1</code> (exposed). The default for these variables is <code>NULL</code>,
and an error will be thrown if you attempt to provide these parameters as
well as <code>table</code>. If provided, these variables are used to construct a 2x2
matrix in the same format as <code>table</code>.</p></dd>


<dt id="arg-table">table<a class="anchor" aria-label="anchor" href="#arg-table"></a></dt>
<dd><p>A 2x2 integerish (see <code><a href="https://mllg.github.io/checkmate/reference/checkIntegerish.html" class="external-link">checkmate::check_integerish()</a></code>) matrix
with matched case-control data. The default value of <code>table</code> is <code>NULL</code>, and
an error will be thrown if you provide <code>table</code> as well as <code>cases</code> and
<code>controls</code>.</p>
<p>The table should have the following format, where each cell represents a
pair of a matched case and control:</p><table class="table table"><tr><td><strong>Cases</strong></td><td><strong>Controls</strong></td><td></td></tr><tr><td></td><td>Exposed</td><td>Unexposed</td></tr><tr><td>Exposed</td><td>a</td><td>b</td></tr><tr><td>Unexposed</td><td>c</td><td>d</td></tr></table></dd>


<dt id="arg-conf-level">conf_level<a class="anchor" aria-label="anchor" href="#arg-conf-level"></a></dt>
<dd><p>Numeric scalar from <code>0.1</code> to <code>0.9999</code>. Controls level at
which to calculate confidence intervals. Default = <code>0.95</code> (95% confidence
intervals).</p></dd>


<dt id="arg-a-b-c-d">a, b, c, d<a class="anchor" aria-label="anchor" href="#arg-a-b-c-d"></a></dt>
<dd><p>Single integerish values with cell counts that correspond to
a 2x2 table of matched case control data.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list with 5 elements:</p><dl><dt><code>data</code></dt>
<dd><p>A 3x3 matrix generated using the data provided, formatted for
matched case-control analysis and with row/column totals.</p></dd>

<dt><code>mcnemar_chi2</code></dt>
<dd><p>Results from analysing the matched case-control data
with <code><a href="https://rdrr.io/r/stats/mcnemar.test.html" class="external-link">mcnemar.test()</a></code>, <em>without</em> Yates' continuity correction.</p></dd>

<dt><code>mcnemar_exact_p</code></dt>
<dd><p>Result of an exact test of \({H}_{0}\):
\(OR = 1\), calculated using the binomial distribution.</p></dd>

<dt><code>proportions</code></dt>
<dd><p>A two-element numeric vector with the proportion of
of cases and controls with the exposure.</p></dd>

<dt><code>statistics</code></dt>
<dd><p>A 4 row, 3 column numeric matrix with point estimates
and confidence intervals for the ratio, difference, and relative
difference in the proportion of cases/controls with the exposure, and
the odds ratio.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Exact Chi-squared statistic:<br>
McNemar, Q. (1947) <em>Note on the sampling error of the difference between
correlated proportions or percentages</em> <strong>Psychometrika</strong> 12(2): 153–157.
<a href="https://doi.org/10.1007/bf02295996" class="external-link">doi:10.1007/bf02295996</a></p>
<p>Other steps:<br>
Agresti, A. (2013) <em>Categorical Data Analysis</em> 3rd ed. Hoboken, NJ: Wiley.
pp. 414-417.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">matchedcc</span><span class="fu">::</span><span class="va"><a href="mccxmpl.html">mccxmpl</a></span></span></span>
<span class="r-in"><span><span class="fu">mcc</span><span class="op">(</span>cases <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">case</span>, controls <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">control</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Controls</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cases       Unexposed Exposed Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Unexposed         8       8    16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Exposed           3       8    11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Total            11      16    27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $mcnemar_chi2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	McNemar's Chi-squared test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data:  mcc_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> McNemar's chi-squared = 2.2727, df = 1, p-value = 0.1317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $mcnemar_exact_p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exact McNemar significance probability </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0.2265625 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $proportions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Proportion with factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Cases  Controls</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    0.5925926 0.4074074</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             estimate [95% CI]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> statistic     estimate       lower      upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   difference 0.1851852 -0.08225420  0.4526246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ratio      1.4545455  0.89110096  2.3742568</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rel. diff. 0.3125000 -0.02436881  0.6493688</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   odds ratio 2.6666667  0.64003641 15.6064036</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert data into 2x2 table</span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">$</span><span class="va">case_fctr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">case</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"6+ cups"</span>, <span class="st">"0 cups"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">$</span><span class="va">control_fctr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">control</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"6+ cups"</span>, <span class="st">"0 cups"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">mcc</span><span class="op">(</span>table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">control_fctr</span>, <span class="va">data</span><span class="op">$</span><span class="va">case_fctr</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Controls</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cases       Unexposed Exposed Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Unexposed         8       3    11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Exposed           8       8    16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Total            16      11    27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $mcnemar_chi2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	McNemar's Chi-squared test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data:  mcc_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> McNemar's chi-squared = 2.2727, df = 1, p-value = 0.1317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $mcnemar_exact_p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exact McNemar significance probability </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0.2265625 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $proportions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Proportion with factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Cases  Controls</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    0.4074074 0.5925926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             estimate [95% CI]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> statistic      estimate       lower     upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   difference -0.1851852 -0.45262457 0.0822542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ratio       0.6875000  0.42118444 1.1222073</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rel. diff. -0.4545455 -1.16725963 0.2581687</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   odds ratio  0.3750000  0.06407626 1.5624111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Alternatively, provide cell counts to `mcci()`</span></span></span>
<span class="r-in"><span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">control_fctr</span>, <span class="va">data</span><span class="op">$</span><span class="va">case_fctr</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">mcci</span><span class="op">(</span>a <span class="op">=</span> <span class="va">table</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>     b <span class="op">=</span> <span class="va">table</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>     c <span class="op">=</span> <span class="va">table</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>     d <span class="op">=</span> <span class="va">table</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Controls</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cases       Unexposed Exposed Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Unexposed         8       3    11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Exposed           8       8    16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Total            16      11    27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $mcnemar_chi2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	McNemar's Chi-squared test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data:  mcc_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> McNemar's chi-squared = 2.2727, df = 1, p-value = 0.1317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $mcnemar_exact_p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exact McNemar significance probability </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              0.2265625 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $proportions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Proportion with factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Cases  Controls</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    0.4074074 0.5925926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             estimate [95% CI]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> statistic      estimate       lower     upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   difference -0.1851852 -0.45262457 0.0822542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ratio       0.6875000  0.42118444 1.1222073</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rel. diff. -0.4545455 -1.16725963 0.2581687</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   odds ratio  0.3750000  0.06407626 1.5624111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Simon Parker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

